2019-01-14 20:57:50.731  INFO 3683 --- [main] c.t.bank.BankDataApplicationTests        : Starting BankDataApplicationTests on weifengdeMacBook-Pro.local with PID 3683 (started by wuwf in /Users/wuwf/Downloads/bank_data)
2019-01-14 20:57:50.736  INFO 3683 --- [main] c.t.bank.BankDataApplicationTests        : The following profiles are active: local
2019-01-14 20:57:50.817  INFO 3683 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6337c201: startup date [Mon Jan 14 20:57:50 CST 2019]; root of context hierarchy
2019-01-14 20:57:53.291  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$78d3c606] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.349  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cache.annotation.ProxyCachingConfiguration' of type [org.springframework.cache.annotation.ProxyCachingConfiguration$$EnhancerBySpringCGLIB$$c1e5fc24] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.391  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration' of type [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration$$EnhancerBySpringCGLIB$$b659c0c8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.427  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.boot.context.properties.ConversionServiceDeducer$Factory' of type [org.springframework.boot.context.properties.ConversionServiceDeducer$Factory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.457  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cache-org.springframework.boot.autoconfigure.cache.CacheProperties' of type [org.springframework.boot.autoconfigure.cache.CacheProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.473  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'cacheManagerCustomizers' of type [org.springframework.boot.autoconfigure.cache.CacheManagerCustomizers] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.486  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.boot.autoconfigure.cache.CaffeineCacheConfiguration' of type [org.springframework.boot.autoconfigure.cache.CaffeineCacheConfiguration$$EnhancerBySpringCGLIB$$e8205a10] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.521  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'cacheManager' of type [org.springframework.cache.caffeine.CaffeineCacheManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:53.525  INFO 3683 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'cacheAutoConfigurationValidator' of type [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration$CacheManagerValidator] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-01-14 20:57:54.103  INFO 3683 --- [main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit 'default'
2019-01-14 20:57:54.135  INFO 3683 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2019-01-14 20:57:54.297  INFO 3683 --- [main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.2.16.Final}
2019-01-14 20:57:54.300  INFO 3683 --- [main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found
2019-01-14 20:57:54.383  INFO 3683 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
2019-01-14 20:57:54.583  INFO 3683 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2019-01-14 20:57:55.271  INFO 3683 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2019-01-14 20:57:55.303  INFO 3683 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2019-01-14 20:57:56.523  INFO 3683 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2019-01-14 20:57:57.451  INFO 3683 --- [main] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory
2019-01-14 20:57:59.569  INFO 3683 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-01-14 20:58:00.270  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.web.context.support.GenericWebApplicationContext@6337c201: startup date [Mon Jan 14 20:57:50 CST 2019]; root of context hierarchy
2019-01-14 20:58:00.456  WARN 3683 --- [main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2019-01-14 20:58:00.568  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[],methods=[POST]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.BillController.add(com.tianyalei.bank.dto.BillDto) throws java.text.ParseException
2019-01-14 20:58:00.570  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[],methods=[GET]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.BillController.find(com.tianyalei.bank.dto.SearchDto)
2019-01-14 20:58:00.572  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/{id}],methods=[POST]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.BillController.delete(java.lang.Long)
2019-01-14 20:58:00.574  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/mohu],methods=[POST]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.BillController.addMohu(com.tianyalei.bank.dto.BillMoDto)
2019-01-14 20:58:00.576  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/company],methods=[POST]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.CompanyController.add(com.tianyalei.bank.model.Company)
2019-01-14 20:58:00.577  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/company],methods=[GET]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.CompanyController.find(java.lang.String)
2019-01-14 20:58:00.578  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/current]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.CurrentPriceController.current(java.lang.String,java.lang.String,int,int)
2019-01-14 20:58:00.581  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/login],methods=[POST]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.LoginController.login(java.lang.String,java.lang.String)
2019-01-14 20:58:00.582  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/login/wechat],methods=[GET]}" onto public com.tianyalei.bank.bean.BaseData com.tianyalei.bank.controller.LoginController.wechatLogin(java.lang.String,java.lang.String)
2019-01-14 20:58:00.583  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/login/code],methods=[GET]}" onto public java.lang.String com.tianyalei.bank.controller.LoginController.wechatCode(java.lang.String,java.lang.String)
2019-01-14 20:58:00.587  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2019-01-14 20:58:00.590  INFO 3683 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2019-01-14 20:58:00.746  INFO 3683 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-01-14 20:58:00.747  INFO 3683 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-01-14 20:58:01.301  INFO 3683 --- [main] s.a.ScheduledAnnotationBeanPostProcessor : No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
2019-01-14 20:58:01.399  INFO 3683 --- [main] c.t.bank.BankDataApplicationTests        : Started BankDataApplicationTests in 11.849 seconds (JVM running for 13.289)
2019-01-14 20:58:01.733  INFO 3683 --- [Thread-2] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6337c201: startup date [Mon Jan 14 20:57:50 CST 2019]; root of context hierarchy
2019-01-14 20:58:01.740  INFO 3683 --- [Thread-2] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2019-01-14 20:58:01.742  INFO 3683 --- [Thread-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2019-01-14 20:58:01.760  INFO 3683 --- [Thread-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2019-01-14 20:58:01.759 ERROR 3683 --- [pool-2-thread-1] o.s.s.s.TaskUtils$LoggingErrorHandler    : Unexpected error occurred in scheduled task.

org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'entityManagerFactory': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:214)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:515)
	at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:290)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:168)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:150)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy105.findFirstByOrderByIdDesc(Unknown Source)
	at com.tianyalei.bank.manager.MessageManager.findLastOne(MessageManager.java:23)
	at com.tianyalei.bank.schedule.DataPickTask.pickTask(DataPickTask.java:42)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:65)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)

